# MnemonicShards

[English](./README.md) | 简体中文

一个安全、专业的助记词分片工具，使用 Shamir 秘密分享算法将您的助记词分割成多个分片，并提供可选的 OpenPGP 加密功能以增强安全性。任意指定数量的分片即可恢复原始助记词。

## 🚀 快速开始

### Docker 部署（推荐）
```bash
# 克隆并使用 Docker 运行
git clone <repository-url>
cd MnemonicShards
docker-compose up -d --build
# 访问 http://localhost:8848
```

### 本地开发
```bash
# 克隆并在本地运行
git clone <repository-url>
cd MnemonicShards
bun install && bun run dev
# 访问 http://localhost:5173
```

### 静态文件
```bash
# 直接在浏览器中打开
open dist/index.html
# 或使用任意静态服务器
npx http-server dist -p 8080
```

## 🔒 安全特性

- **完全离线运行** - 数据不会离开您的设备
- **专业级加密** - 使用标准 Shamir 秘密分享算法
- **客户端处理** - 所有计算在浏览器中完成
- **开源透明** - 代码完全开源，可自行审查

## 🚀 核心功能

### 助记词处理
- ✅ 支持 12/24 个助记词输入
- ✅ BIP39 标准单词验证
- ✅ 智能自动完成建议
- ✅ 重复单词检测
- ✅ 实时单词计数和验证反馈

### Shamir 秘密分享
- ✅ 灵活的分片配置（3-7 个分片）
- ✅ 自定义恢复阈值（2-5 个分片）
- ✅ 专业级密码学算法
- ✅ 可配置的安全级别（从保守到便捷）

### 安全与加密
- ✅ 分片 OpenPGP 对称加密
- ✅ AES-256 加密标准
- ✅ 安全密码生成及强度验证
- ✅ 加密分片存储支持
- ✅ 内存安全密码处理（自动清除）

### 用户界面
- ✅ 一键复制/下载分片
- ✅ 移动端完美适配和触摸支持
- ✅ 标签式恢复界面（粘贴/上传标签）
- ✅ 增强的助记词恢复显示
- ✅ 现代响应式设计系统
- ✅ 无障碍友好界面

### 文件管理
- ✅ 文件上传恢复（支持 .txt 和 .gpg 文件）
- ✅ 跳过解密选项（适用于混合文件类型）
- ✅ 批量文件处理
- ✅ 拖拽文件支持
- ✅ 文件大小验证（最大 5MB）

### 部署选项
- ✅ 单文件部署（dist/index.html）
- ✅ 容器化部署及安全加固
- ✅ 静态站点托管兼容
- ✅ 完全离线运行

## 🛠️ 技术栈

### 核心依赖

- **[shamir-secret-sharing](https://www.npmjs.com/package/shamir-secret-sharing)** - 专业级 Shamir 秘密分享算法实现
  - 标准密码学算法，安全可靠
  - 经过同行评议的加密库
  - 支持灵活的阈值配置
- **[openpgp](https://www.npmjs.com/package/openpgp)** - JavaScript 的 OpenPGP 实现
  - 行业标准 OpenPGP 密码学
  - AES-256 对称加密
  - 与 GPG 兼容的加密输出
  - 安全的基于密码的加密

### 开发工具

- **Vite** - 现代前端构建工具
- **原生 JavaScript** - 无框架依赖，轻量高效
- **CSS3** - 现代样式和动画

## 📁 项目结构

```
src/
├── components/              # 核心组件
│   ├── MnemonicInput.js     # 助记词输入组件（支持自动完成、验证、重复检测）
│   ├── ShareManager.js      # 分片管理组件（处理分片生成和恢复）
│   ├── RecoveryTabManager.js # 恢复标签管理器（处理粘贴/上传标签和文件处理）
│   └── PasswordDialog.js    # 密码对话框组件（处理加密/解密密码输入）
├── utils/                   # 工具函数
│   ├── dom.js              # DOM 操作工具（安全的元素获取和创建）
│   ├── validation.js       # 验证工具（BIP39单词验证）
│   ├── encryption.js       # 加密工具（OpenPGP加密/解密、密码验证）
│   └── helpers.js          # 通用工具（复制、下载、编码等）
├── styles/
│   └── styles.css          # 主样式文件（现代设计系统，支持移动端）
├── constants/              # 常量配置
│   ├── index.js            # 应用常量和配置
│   └── bip39-words.js      # BIP39 单词列表
└── main.js                 # 应用入口（模块化架构）

根目录/
├── index.html              # 主页面
├── package.json            # 项目配置
├── vite.config.js          # 构建配置
├── Dockerfile              # Docker 容器配置
├── docker-compose.yml      # Docker Compose 配置
├── .dockerignore           # Docker 忽略文件
├── DOCKER.md               # Docker 部署指南
└── dist/                   # 构建输出
    └── index.html          # 生产版本（单文件部署）
```

### 🏗️ 架构特点

- **模块化设计** - 清晰的组件分离，易于维护和扩展
- **类型安全** - 完整的参数验证和错误处理
- **性能优化** - 防抖输入、智能缓存、高效渲染
- **移动优先** - 完美的移动端适配和触摸优化
- **无框架依赖** - 原生 JavaScript，轻量且快速

## 🔐 加密功能

本工具提供可选的 OpenPGP 加密功能，以增强助记词分片的安全性：

### 加密选项

- **对称加密**：使用 AES-256 算法和基于密码的加密
- **GPG 兼容性**：加密输出与标准 GPG 工具兼容
- **密码强度验证**：内置密码强度评估
- **安全密码生成**：可生成密码学安全的密码

### 加密流程

1. **密码创建**：创建强密码或使用内置生成器
2. **分片加密**：每个分片使用 OpenPGP 单独加密
3. **安全存储**：加密后的分片可以安全地存储在不太安全的介质上
4. **解密恢复**：使用相同密码解密恢复原始分片

### 密码安全

- **最低要求**：至少 8 个字符，包含大小写字母、数字和特殊字符
- **强度级别**：弱、中、强指示器及改进建议
- **安全生成**：密码学安全的随机密码生成
- **内存安全**：使用后密码不会被存储或缓存

## 🎯 使用方法

### 基本使用（不加密）

1. 打开 [应用页面](./index.html)
2. 选择助记词数量（12 或 24 个单词）
3. 配置分片总数和恢复阈值
4. 输入助记词，系统会自动验证每个单词
5. 点击"生成分片"生成多个分片
6. 将分片分别保存在不同的安全位置
7. 需要恢复时，输入任意指定数量的分片即可

### 加密使用（推荐）

1. 打开 [应用页面](./index.html)
2. 选择助记词数量（12 或 24 个单词）
3. 配置分片总数和恢复阈值
4. 输入助记词，系统会自动验证每个单词
5. 启用加密选项并创建强密码
6. 点击"生成并加密分片"创建加密分片
7. 将加密分片和密码分别保存在不同的安全位置
8. 需要恢复时，输入加密分片和密码进行解密恢复

### 文件上传恢复

1. 打开 [应用页面](./index.html)
2. 导航到"恢复助记词"部分
3. 选择"上传"标签
4. 上传您的分片文件（.txt 或 .gpg 格式）
5. 如果您有加密文件（.gpg），在提示时输入解密密码
6. 点击"恢复助记词"恢复您的原始助记词
7. 恢复的助记词将以清晰的单词分隔显示

### 混合恢复方法

- **粘贴方法**：直接将分片内容粘贴到输入字段中
- **上传方法**：上传分片文件进行批量处理
- **跳过解密**：当上传混合文件时，可以跳过未加密文件的解密

### 本地开发

```bash
# 克隆项目
git clone <repository-url>
cd MnemonicShards

# 安装依赖
bun install

# 启动开发服务器
bun run dev
# 访问 http://localhost:5173

# 构建生产版本
bun run build
# 查看 dist/index.html

# 预览生产构建
bun run start
# 访问 http://localhost:8080
```

### Docker 部署（推荐）

应用程序包含优化的 Docker 配置，用于安全的容器化部署：

#### 快速启动

```bash
# 使用 Docker Compose 构建并运行
docker-compose up -d --build

# 访问应用程序
# 访问 http://localhost:8848

# 停止容器
docker-compose down
```

#### 高级 Docker 用法

```bash
# 手动构建 Docker 镜像
docker build -t mnemonic-shards .

# 运行容器
docker run -d \
  --name mnemonic-shards-app \
  -p 8848:8848 \
  --read-only \
  --security-opt no-new-privileges:true \
  mnemonic-shards

# 检查容器状态
docker ps

# 查看日志
docker logs mnemonic-shards-app

# 健康检查
curl http://localhost:8848/
```

#### Docker 安全特性

- **多阶段构建** - 最小化最终镜像大小
- **非 root 用户** - 以非特权用户身份运行（UID 1001）
- **只读文件系统** - 防止未授权修改
- **健康检查** - 自动监控应用程序状态
- **无网络依赖** - 完全离线运行
- **Alpine Linux 基础** - 最小攻击面

#### 容器优势

- ✅ **隔离环境** - 对主机系统无影响
- ✅ **一致性部署** - 到处都是相同的环境
- ✅ **易于扩展** - 简单部署多个实例
- ✅ **安全加固** - 内置安全最佳实践
- ✅ **离线就绪** - 无需互联网连接

## 📱 安全建议

1. **离线环境使用** - 建议在断网环境中使用此工具
2. **分散存储** - 将分片保存在不同的物理位置
3. **安全介质** - 使用加密的 USB 驱动器或纸质备份
4. **定期验证** - 定期测试分片的恢复功能
5. **分片保护** - 不要将分片分享给不信任的人
6. **密码管理** - 将加密密码与加密分片分开存储
7. **强密码** - 使用内置密码生成器或创建高熵密码
8. **密码分离** - 将密码存储在与加密分片不同的位置
9. **记忆关键密码** - 考虑记忆加密密码以获得终极安全性
10. **密码备份** - 使用不同方法为加密密码创建安全备份

## 🔧 分片配置示例

| 配置 | 总分片数 | 恢复阈值 | 安全性     | 便利性     |
| ---- | -------- | -------- | ---------- | ---------- |
| 保守 | 7        | 5        | ⭐⭐⭐⭐⭐ | ⭐⭐       |
| 平衡 | 5        | 3        | ⭐⭐⭐⭐   | ⭐⭐⭐⭐   |
| 便捷 | 3        | 2        | ⭐⭐⭐     | ⭐⭐⭐⭐⭐ |

## 🌟 浏览器支持

- Chrome 88+
- Firefox 85+
- Safari 14+
- Edge 88+
- 移动端浏览器

## ⚠️ 免责声明

本工具仅供教育和研究目的使用。用户应：

- 自行承担使用风险
- 确保理解 Shamir 秘密分享的工作原理
- 在使用前进行充分测试
- 妥善保管生成的分片

## 📄 许可证

ISC License

---

**⚡ MnemonicShards**: 单文件部署，无服务器要求，完全客户端运行
